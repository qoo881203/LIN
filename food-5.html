<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éš¨æ©Ÿç¾é£Ÿé¸æ“‡å™¨</title>
 <div id="usage-instruction" style="margin: 30px auto; max-width: 700px; text-align: left; background-color: rgba(255,255,255,0.8); color: #000; padding: 20px; border-radius: 8px;">
    <h2>ğŸ“Œ ä½¿ç”¨èªªæ˜</h2>
    <ul>
    <li>ğŸ‘† é»æ“Šä¸Šæ–¹ã€Œå€åŸŸæŒ‰éˆ•ã€åˆ‡æ›ä½ æƒ³é¸æ“‡çš„åœ°å€ï¼Œä¾‹å¦‚ã€Œæ¡ƒç«¹è‹—ã€ã€ã€Œå¤œé–“å·¡æŸ¥ã€ç­‰ã€‚</li>
    <li>ğŸ² é»æ“Šã€Œé¸æ“‡ä»Šå¤©çš„ç¾é£Ÿã€å³å¯å¾è©²å€åŸŸéš¨æ©ŸæŠ½ä¸€å€‹ç¾é£Ÿã€‚</li>
    <li>â• é»ã€Œå¢åŠ ç¾é£Ÿé¸é …ã€å¯è¼¸å…¥å¤šç­†ï¼ˆç”¨é€—è™Ÿåˆ†éš”ï¼‰ï¼Œæ–°å¢åˆ°ç›®å‰å€åŸŸã€‚</li>
    <li>â– é»ã€Œåˆªé™¤ç¾é£Ÿé¸é …ã€è¼¸å…¥åç¨±å¾Œå¯åˆªé™¤è©²å€åŸŸçš„æŒ‡å®šé …ç›®ã€‚</li>
    <li>ğŸ” é»ã€ŒæŸ¥è©¢ç¾é£Ÿé¸é …ã€å¯ä¾é—œéµå­—æŸ¥æ‰¾æ˜¯å¦æœ‰è©²é¸é …ã€‚</li>
    <li>ğŸ“‹ é»ã€Œä¸€éµæŸ¥è©¢è©²å€åŸŸæ‰€æœ‰ç¾é£Ÿé¸é …ã€é¡¯ç¤ºç›®å‰æ¸…å–®ã€‚</li>
    <li>ğŸ“ é»ã€Œå°èˆªè‡³é¸æ“‡çš„ç¾é£Ÿã€å¯é–‹å•Ÿ Google åœ°åœ–æœå°‹æ­¤ç¾é£Ÿã€‚</li>
    </ul>
 </div>
    
    <style>
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-image: url('https://raw.githubusercontent.com/qoo881203/LIN/main/Mario Kart 8 DX_wallpaper_02.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center;
            color: #ffffff;
        }
        .container {
            margin-top: 50px;
        }
        button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            margin: 5px;
            background-color: #ffffff;
            color: #333;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #e0e0e0;
        }
        #region-buttons button {
            padding: 15px 30px;
            font-size: 27px; /* å¢åŠ æŒ‰éˆ•å°ºå¯¸åˆ°1.5å€ */
            font-weight: bold; /* å­—é«”åŠ ç²— */
            background-color: #d3d3d3; /* æŒ‰éˆ•åº•è‰²è¨­ç½®ç‚ºæ·ºç°è‰² */
            color: #333;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        #region-buttons button:hover {
            background-color: #c0c0c0; /* æ‡¸åœæ™‚çš„æŒ‰éˆ•é¡è‰²è¨­ç½®ç‚ºç¨æ·±çš„æ·ºç°è‰² */
        }
        #food-display, #all-foods-display {
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
            color: #000000;
            background-color: rgba(255, 255, 255, 0.8);/* é€™è¡Œè¨­ç½®äº†èƒŒæ™¯ç‚ºç™½è‰²ä¸”å¸¶é€æ˜åº¦ */
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
        #current-region {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 18px;
            background-color: rgba(0, 0, 0, 0.5);
            color: #ffffff;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
    <!-- åŠ å…¥ Firebase å‡½å¼åº« -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
    <div id="current-region">ç•¶å‰å€åŸŸï¼šæ¡ƒç«¹è‹—</div>
    <div class="container">
        <h1>éš¨æ©Ÿç¾é£Ÿé¸æ“‡å™¨</h1>
        <div id="region-buttons">
            <!-- å€åŸŸåˆ‡æ›æŒ‰éˆ•ï¼Œé»æ“Šå¯åˆ‡æ›ä¸åŒçš„å€åŸŸ -->
            <button onclick="changeRegion('æ¡ƒç«¹è‹—')">æ¡ƒç«¹è‹—</button>
            <button onclick="changeRegion('åŒ—åŒ—åŸº')">åŒ—åŒ—åŸº</button>
            <button onclick="changeRegion('ä¸­å½°æŠ•')">ä¸­å½°æŠ•</button>
            <button onclick="changeRegion('é›²å˜‰å—')">é›²å˜‰å—</button>
            <button onclick="changeRegion('é«˜å±')">é«˜å±</button>
            <button onclick="changeRegion('å®œè˜­')">å®œè˜­</button>
            <button onclick="changeRegion('èŠ±æ±')">èŠ±æ±</button>
            <button onclick="changeRegion('ç‰›è‚‰éºµ')">ç‰›è‚‰éºµ</button>
            <button onclick="changeRegion('å¤œé–“å·¡æŸ¥')">å¤œé–“å·¡æŸ¥</button>
        </div>
        <!-- åŠŸèƒ½æŒ‰éˆ• -->
        <button onclick="clearAllFoodsDisplay(); pickRandomFood()">é¸æ“‡ä»Šå¤©çš„ç¾é£Ÿ</button>
        <button onclick="clearAllFoodsDisplay(); addFood()">å¢åŠ ç¾é£Ÿé¸é …</button>
        <button onclick="clearAllFoodsDisplay(); removeFood()">åˆªé™¤ç¾é£Ÿé¸é …</button>
        <button onclick="clearAllFoodsDisplay(); queryFood()">æŸ¥è©¢ç¾é£Ÿé¸é …</button>
        <button onclick="listAllFoods()">ä¸€éµæŸ¥è©¢è©²å€åŸŸæ‰€æœ‰ç¾é£Ÿé¸é …</button>
        <button onclick="navigateToFood()">å°èˆªè‡³é¸æ“‡çš„ç¾é£Ÿ</button>
        <div id="food-display"></div>
        <div id="all-foods-display"></div>
    </div>

    <script>
        // Firebase é…ç½®ï¼ˆæ›¿æ›ç‚ºä½ çš„ Firebase è¨­å®šï¼‰
        const firebaseConfig = {
            apiKey: "AIzaSyC6eM0-qNoaq1bM58LwbHh5RfO1bqGIjFA",
            authDomain: "food-805fe.firebaseapp.com",
            databaseURL: "https://food-805fe-default-rtdb.firebaseio.com",
            projectId: "food-805fe",
            storageBucket: "food-805fe.appspot.com",
            messagingSenderId: "1083735236426",
            appId: "1:1083735236426:web:0e7d8afa0a6a8df58babb3"
        };

        // åˆå§‹åŒ– Firebase
        firebase.initializeApp(firebaseConfig);
        let database = firebase.database();
        let currentRegion = 'æ¡ƒç«¹è‹—';
        let foodsRef = database.ref(`foods/${currentRegion}`);

        let foods = [];
        let selectedFood = "";

        // ç›£è½è³‡æ–™è®ŠåŒ–ï¼Œç•¶å‰å€åŸŸè³‡æ–™æ›´æ–°æ™‚æ›´æ–° foods è®Šæ•¸
        function setupFoodsListener() {
            foodsRef.on('value', (snapshot) => {
                if (snapshot.exists()) {
                    const data = snapshot.val();
                    foods = Object.entries(data || {}).map(([key, value]) => ({ key, value }));
                } else {
                    foods = [];
                }
            });
        }
        setupFoodsListener();

        // åˆ‡æ›å€åŸŸä¸¦é‡æ–°ç›£è½è³‡æ–™è®ŠåŒ–
        function changeRegion(region) {
            clearAllFoodsDisplay(); // æ¸…é™¤æ‰€æœ‰é¡¯ç¤ºçš„è¨Šæ¯
            currentRegion = region;
            document.getElementById('current-region').innerText = `ç•¶å‰å€åŸŸï¼š${currentRegion}`;
            foodsRef = database.ref(`foods/${currentRegion}`);
            setupFoodsListener();
            alert(`å·²åˆ‡æ›è‡³ ${region} å€åŸŸçš„ç¾é£Ÿé¸é …`);
        }

        // éš¨æ©Ÿé¸æ“‡ä¸€å€‹ç¾é£Ÿé¸é …
        function pickRandomFood() {
            if (foods.length === 0) {
                displayMessage("food-display", "ç¾é£Ÿé¸é …æ¸…å–®ç‚ºç©ºï¼è«‹å…ˆå¢åŠ ç¾é£Ÿé¸é …ã€‚");
                return;
            }
            const randomIndex = Math.floor(Math.random() * foods.length);
            selectedFood = foods[randomIndex].value;
            displayMessage("food-display", `ä»Šå¤©çš„ç¾é£Ÿæ˜¯ï¼š${selectedFood}`);
        }

        // æ–°å¢ä¸€å€‹æˆ–å¤šå€‹ç¾é£Ÿé¸é …åˆ°ç•¶å‰å€åŸŸ
        function addFood() {
            const newFoods = prompt("è«‹è¼¸å…¥æƒ³è¦å¢åŠ çš„ç¾é£Ÿé¸é …ï¼ˆå¯è¼¸å…¥å¤šå€‹ï¼Œç”¨é€—è™Ÿåˆ†éš”ï¼‰:");
            if (newFoods) {
                const foodsArray = newFoods.split(',').map(food => food.trim()).filter(food => food.length > 0);
                foodsArray.forEach(newFood => {
                    const newFoodRef = foodsRef.push();
                    newFoodRef.set(newFood)
                        .catch(error => alert("æ–°å¢å¤±æ•—ï¼š" + error.message));
                });
                alert("æˆåŠŸæ–°å¢ç¾é£Ÿé¸é …ï¼");
            }
        }

        // åˆªé™¤æŒ‡å®šçš„ç¾é£Ÿé¸é …
        function removeFood() {
            const foodToRemove = prompt("è«‹è¼¸å…¥æƒ³è¦åˆªé™¤çš„ç¾é£Ÿé¸é …:");
            const foodEntry = foods.find(food => food.value.includes(foodToRemove));
            if (foodEntry) {
                foodsRef.child(foodEntry.key).remove()
                    .then(() => alert("æˆåŠŸåˆªé™¤ç¾é£Ÿé¸é …ï¼"))
                    .catch(error => alert("åˆªé™¤å¤±æ•—ï¼š" + error.message));
            } else {
                alert("æ‰¾ä¸åˆ°æ­¤ç¾é£Ÿé¸é …ï¼");
            }
        }

        // æŸ¥è©¢åŒ…å«æŒ‡å®šé—œéµå­—çš„ç¾é£Ÿé¸é …
        function queryFood() {
            const queryFood = prompt("è«‹è¼¸å…¥æƒ³è¦æŸ¥è©¢çš„ç¾é£Ÿé¸é …é—œéµå­—:");
            const foundFoods = foods.filter(food => food.value.includes(queryFood));
            if (foundFoods.length > 0) {
                alert(`æ‰¾åˆ°ä»¥ä¸‹ç¾é£Ÿé¸é …åŒ…å«é—œéµå­— "${queryFood}"ï¼š\n${foundFoods.map(food => food.value).join('\n')}`);
            } else {
                alert(`æ‰¾ä¸åˆ°ä»»ä½•åŒ…å«é—œéµå­— "${queryFood}" çš„ç¾é£Ÿé¸é …ã€‚`);
            }
        }

        // åˆ—å‡ºç•¶å‰å€åŸŸçš„æ‰€æœ‰ç¾é£Ÿé¸é …
        function listAllFoods() {
            if (foods.length === 0) {
                displayMessage("all-foods-display", "ç¾é£Ÿé¸é …æ¸…å–®ç‚ºç©ºï¼");
            } else {
                displayMessage("all-foods-display", "ç›®å‰æ‰€æœ‰ç¾é£Ÿé¸é …:\n" + foods.map(food => food.value).join("\n"));
            }
        }

        // å°èˆªåˆ°é¸æ“‡çš„ç¾é£Ÿé¸é …åœ¨åœ°åœ–ä¸­çš„ä½ç½®
        function navigateToFood() {
            if (!selectedFood) {
                alert("è«‹å…ˆé¸æ“‡ä¸€å€‹ç¾é£Ÿé¸é …ï¼");
                return;
            }
            const query = encodeURIComponent(selectedFood);
            const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${query}`;
            window.open(googleMapsUrl, '_blank');
        }

        // é¡¯ç¤ºè¨Šæ¯åˆ°æŒ‡å®šçš„å…ƒç´ ä¸Š
        function displayMessage(elementId, message) {
            const element = document.getElementById(elementId);
            element.innerText = message;
            element.style.display = "block";
        }

        // æ¸…é™¤æ‰€æœ‰é¡¯ç¤ºçš„è¨Šæ¯
        function clearAllFoodsDisplay() {
            document.getElementById("food-display").style.display = "none";
            document.getElementById("all-foods-display").style.display = "none";
        }
    </script>
</body>
</html>
